<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Shaurya's AI</title>

<style>
:root{
  --bg:#0f172a;
  --panel:#1e293b;
  --text:#ffffff;
  --user:#2563eb;
  --ai:#334155;
}

body.light{
  --bg:#f8fafc;
  --panel:#ffffff;
  --text:#000000;
  --ai:#e2e8f0;
}

body{
  margin:0;
  font-family:Inter,system-ui;
  background:var(--bg);
  color:var(--text);
  display:flex;
  flex-direction:column;
  height:100vh;
}

header{
  padding:16px;
  background:var(--panel);
  display:flex;
  justify-content:space-between;
  align-items:center;
  font-weight:600;
  font-size:18px;
}

#chat{
  flex:1;
  overflow-y:auto;
  padding:20px;
  display:flex;
  flex-direction:column;
}

.message{
  margin-bottom:15px;
  padding:14px;
  border-radius:14px;
  max-width:80%;
  line-height:1.5;
}

.user{
  background:var(--user);
  align-self:flex-end;
}

.ai{
  background:var(--ai);
  align-self:flex-start;
}

footer{
  display:flex;
  padding:12px;
  background:var(--panel);
}

input{
  flex:1;
  padding:12px;
  border-radius:10px;
  border:none;
  outline:none;
  font-size:14px;
}

button{
  margin-left:10px;
  padding:10px 16px;
  border:none;
  border-radius:10px;
  cursor:pointer;
  font-weight:600;
}

small{
  opacity:0.6;
  font-size:12px;
}
</style>
</head>
<body>

<header>
  Shaurya's AI
  <div>
    <button onclick="toggleTheme()">Theme</button>
    <button onclick="voiceInput()">ðŸŽ¤</button>
  </div>
</header>

<div id="chat"></div>

<footer>
  <input id="input" placeholder="Ask anything..." />
  <button onclick="send()">Send</button>
</footer>

<script>
const chat=document.getElementById("chat");
const input=document.getElementById("input");

function addMessage(role,text){
  const div=document.createElement("div");
  div.className="message "+role;
  div.innerHTML=text;
  chat.appendChild(div);
  chat.scrollTop=chat.scrollHeight;
}

function typeEffect(element,text){
  element.innerHTML="";
  let i=0;
  const speed=12;
  const interval=setInterval(()=>{
    element.innerHTML=text.slice(0,i+1);
    i++;
    chat.scrollTop=chat.scrollHeight;
    if(i>=text.length) clearInterval(interval);
  },speed);
}

function rewriteAsAI(text){
  return `
Hereâ€™s what I found:

${text}

If you'd like more details, ask me to explain a specific part.
`;
}

async function send(){
  const question=input.value.trim();
  if(!question) return;

  addMessage("user",question);
  input.value="";

  const aiDiv=document.createElement("div");
  aiDiv.className="message ai";
  aiDiv.textContent="Thinking...";
  chat.appendChild(aiDiv);

  try{
    const searchRes=await fetch(
      `https://en.wikipedia.org/w/api.php?action=query&list=search&srsearch=${encodeURIComponent(question)}&format=json&origin=*`
    );
    const searchData=await searchRes.json();

    if(!searchData.query.search.length){
      aiDiv.textContent="I couldn't find information on that.";
      return;
    }

    const title=searchData.query.search[0].title;

    const summaryRes=await fetch(
      `https://en.wikipedia.org/api/rest_v1/page/summary/${encodeURIComponent(title)}`
    );
    const summaryData=await summaryRes.json();

    const aiText = rewriteAsAI(summaryData.extract);

    const finalAnswer = `
<strong>${summaryData.title}</strong><br><br>
${aiText}
<br><br>
<small>Source: <a href="${summaryData.content_urls.desktop.page}" target="_blank">Wikipedia</a></small>
`;

    typeEffect(aiDiv,finalAnswer);

  }catch(err){
    aiDiv.textContent="Error: "+err.message;
  }
}

function toggleTheme(){
  document.body.classList.toggle("light");
}

function voiceInput(){
  const recognition=new(window.SpeechRecognition||window.webkitSpeechRecognition)();
  recognition.lang="en-US";
  recognition.start();
  recognition.onresult=e=>{
    input.value=e.results[0][0].transcript;
    send();
  };
}

input.addEventListener("keydown",e=>{
  if(e.key==="Enter") send();
});
</script>

</body>
</html>
