<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>DeepSeek AI</title>

<!-- Highlight.js -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>

<!-- Marked.js -->
<script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

<style>
* { margin:0; padding:0; box-sizing:border-box; }

body {
    font-family: system-ui, -apple-system, sans-serif;
    background:#0f172a;
    color:white;
    display:flex;
    flex-direction:column;
    height:100vh;
}

header {
    padding:15px;
    background:#1e293b;
    text-align:center;
    font-weight:bold;
    border-bottom:1px solid #334155;
}

#chat {
    flex:1;
    overflow-y:auto;
    padding:20px;
}

.message { margin-bottom:20px; }

.user { text-align:right; }

.bubble {
    display:inline-block;
    padding:12px 16px;
    border-radius:12px;
    max-width:80%;
    line-height:1.6;
}

.user .bubble { background:#2563eb; }
.ai .bubble { background:#1e293b; }

pre {
    background:#0f172a !important;
    padding:10px;
    border-radius:8px;
    overflow-x:auto;
}

#inputArea {
    display:flex;
    padding:15px;
    background:#1e293b;
    border-top:1px solid #334155;
}

input {
    flex:1;
    padding:12px;
    border-radius:8px;
    border:none;
    background:#0f172a;
    color:white;
}

button {
    margin-left:10px;
    padding:12px 18px;
    border-radius:8px;
    border:none;
    background:#2563eb;
    color:white;
    cursor:pointer;
}

button:hover { background:#1d4ed8; }

.typing {
    opacity:0.6;
    font-style:italic;
}
</style>
</head>

<body>

<header>DeepSeek AI Assistant</header>

<div id="chat"></div>

<div id="inputArea">
    <input id="userInput" placeholder="Ask something..." />
    <button onclick="sendMessage()">Send</button>
</div>

<script>
const API_KEY = "YOUR_DEEPSEEK_API_KEY";
const chat = document.getElementById("chat");
const input = document.getElementById("userInput");

input.addEventListener("keypress", e => {
    if (e.key === "Enter") sendMessage();
});

function addMessage(content, sender) {
    const msg = document.createElement("div");
    msg.className = "message " + sender;

    const bubble = document.createElement("div");
    bubble.className = "bubble";
    bubble.innerHTML = content;

    msg.appendChild(bubble);
    chat.appendChild(msg);
    chat.scrollTop = chat.scrollHeight;

    return bubble;
}

async function sendMessage() {
    const text = input.value.trim();
    if (!text) return;

    addMessage(text, "user");
    input.value = "";

    const typingBubble = addMessage("Typing...", "ai");
    typingBubble.classList.add("typing");

    try {
        const response = await fetch("https://api.deepseek.com/v1/chat/completions", {
            method: "POST",
            headers: {
                "Content-Type": "application/json",
                "Authorization": "Bearer " + API_KEY
            },
            body: JSON.stringify({
                model: "deepseek-chat",
                messages: [{ role: "user", content: text }]
            })
        });

        const data = await response.json();
        const reply = data.choices?.[0]?.message?.content || "No response.";

        typingBubble.classList.remove("typing");
        typingBubble.innerHTML = "";

        await typeText(typingBubble, reply);

        document.querySelectorAll("pre code").forEach(block => {
            hljs.highlightElement(block);
        });

    } catch (error) {
        typingBubble.innerHTML = "Error contacting DeepSeek API.";
    }
}

function typeText(element, text) {
    return new Promise(resolve => {
        const parsed = marked.parse(text);
        let index = 0;

        const interval = setInterval(() => {
            element.innerHTML = parsed.substring(0, index++);
            chat.scrollTop = chat.scrollHeight;

            if (index > parsed.length) {
                clearInterval(interval);
                resolve();
            }
        }, 5);
    });
}
</script>

</body>
</html>
