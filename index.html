<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Shaurya's AI</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>

/* ===== THEME VARIABLES ===== */
:root {
    --bg: #0f172a;
    --card: rgba(255,255,255,0.05);
    --text: #ffffff;
    --accent: #3b82f6;
}

.light {
    --bg: #f3f4f6;
    --card: rgba(0,0,0,0.05);
    --text: #111827;
    --accent: #2563eb;
}

body {
    margin: 0;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
    background: var(--bg);
    color: var(--text);
    transition: 0.4s;
}

/* ===== CONTAINER ===== */
.container {
    max-width: 500px;
    margin: auto;
    height: 100vh;
    display: flex;
    flex-direction: column;
    padding: 20px;
}

/* ===== HEADER ===== */
.header {
    text-align: center;
    font-weight: 600;
    font-size: 22px;
    margin-bottom: 10px;
}

/* Dark/Light Toggle */
.toggle {
    text-align: right;
    cursor: pointer;
    font-size: 14px;
    margin-bottom: 10px;
}

/* ===== AI ORB ===== */
.orb {
    width: 90px;
    height: 90px;
    border-radius: 50%;
    margin: 10px auto;
    background: radial-gradient(circle at 30% 30%, var(--accent), #000);
    transition: 0.3s;
}

.orb.active {
    transform: scale(1.2);
    box-shadow: 0 0 40px var(--accent);
}

/* ===== CHAT ===== */
.chat {
    flex: 1;
    overflow-y: auto;
    padding: 10px;
    background: var(--card);
    border-radius: 15px;
    backdrop-filter: blur(12px);
}

.message {
    margin-bottom: 12px;
    line-height: 1.5;
}

.user { text-align: right; color: var(--accent); }
.bot { text-align: left; }

/* ===== Typing Indicator ===== */
.typing {
    display: inline-block;
}

.typing span {
    display: inline-block;
    width: 6px;
    height: 6px;
    margin: 2px;
    border-radius: 50%;
    background: var(--text);
    animation: bounce 1s infinite;
}

.typing span:nth-child(2){ animation-delay: 0.2s; }
.typing span:nth-child(3){ animation-delay: 0.4s; }

@keyframes bounce {
    0%, 80%, 100% { transform: scale(0); }
    40% { transform: scale(1); }
}

/* ===== INPUT ===== */
.input-panel {
    display: flex;
    margin-top: 10px;
}

input {
    flex: 1;
    padding: 12px;
    border-radius: 12px;
    border: none;
    background: var(--card);
    color: var(--text);
    outline: none;
}

button {
    margin-left: 8px;
    padding: 12px;
    border-radius: 12px;
    border: none;
    background: var(--accent);
    color: white;
    cursor: pointer;
}

</style>
</head>

<body>

<div class="container">

<div class="header">Shaurya's AI</div>
<div class="toggle" onclick="toggleTheme()">Toggle Theme</div>

<div class="orb" id="orb"></div>

<div class="chat" id="chat"></div>

<div class="input-panel">
    <input type="text" id="input" placeholder="Ask something...">
    <button onclick="send()">Send</button>
    <button onclick="startVoice()">ðŸŽ¤</button>
</div>

</div>

<script>
const chat = document.getElementById("chat");
const input = document.getElementById("input");
const orb = document.getElementById("orb");

/* ===== GREETING DATABASE ===== */
let greetings = ["hi","hello","hey","namaste","good morning","good evening"];
for(let i=0;i<1000;i++){
    greetings.push("hi "+i);
    greetings.push("hello "+i);
}
function normalize(t){ return t.toLowerCase().trim(); }
function isGreeting(t){ return greetings.includes(normalize(t)); }

/* ===== ADD MESSAGE ===== */
function addMessage(text,type){
    const msg=document.createElement("div");
    msg.className="message "+type;
    msg.textContent=text;
    chat.appendChild(msg);
    chat.scrollTop=chat.scrollHeight;
}

/* ===== STREAM TEXT EFFECT ===== */
function streamText(text){
    return new Promise(resolve=>{
        const msg=document.createElement("div");
        msg.className="message bot";
        chat.appendChild(msg);
        let i=0;
        const interval=setInterval(()=>{
            msg.textContent+=text[i];
            i++;
            chat.scrollTop=chat.scrollHeight;
            if(i>=text.length){
                clearInterval(interval);
                resolve();
            }
        },15);
    });
}

/* ===== Typing Indicator ===== */
function showTyping(){
    const div=document.createElement("div");
    div.className="message bot";
    div.id="typing";
    div.innerHTML='<div class="typing"><span></span><span></span><span></span></div>';
    chat.appendChild(div);
    chat.scrollTop=chat.scrollHeight;
}
function removeTyping(){
    const t=document.getElementById("typing");
    if(t) t.remove();
}

/* ===== Wikipedia ===== */
async function searchWikipedia(query){
    const url=`https://en.wikipedia.org/api/rest_v1/page/summary/${encodeURIComponent(query)}`;
    try{
        const res=await fetch(url);
        if(!res.ok) throw new Error();
        const data=await res.json();
        return data.extract || "No information found.";
    }catch{
        return "Unable to retrieve information.";
    }
}

/* ===== SEND ===== */
async function send(){
    const text=input.value.trim();
    if(!text) return;

    addMessage(text,"user");
    input.value="";
    orb.classList.add("active");

    showTyping();

    let response;
    if(isGreeting(text)){
        response="Hello Shaurya. How can I assist you today?";
    } else {
        response=await searchWikipedia(text);
    }

    removeTyping();
    await streamText(response);

    speak(response);

    orb.classList.remove("active");
}

/* ===== VOICE ===== */
function speak(text){
    const utter=new SpeechSynthesisUtterance(text);
    speechSynthesis.speak(utter);
}

function startVoice(){
    const recognition=new (window.SpeechRecognition || window.webkitSpeechRecognition)();
    recognition.start();
    orb.classList.add("active");

    recognition.onresult=function(e){
        input.value=e.results[0][0].transcript;
        send();
    };
}

/* ===== ORB REACT TO TYPING ===== */
input.addEventListener("input",()=>{
    if(input.value.length>0){
        orb.classList.add("active");
    } else {
        orb.classList.remove("active");
    }
});

/* ===== THEME TOGGLE ===== */
function toggleTheme(){
    document.body.classList.toggle("light");
}

</script>

</body>
</html>